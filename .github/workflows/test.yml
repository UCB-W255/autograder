name: test
on: 
    push:
jobs:
  ci:
    timeout-minutes: 5
    strategy:
        fail-fast: false
        matrix:
            python-version: ["3.11"]
            poetry-version: ["1.5.1"]
            os: [ubuntu-22.04]
    runs-on: 
        group: Default
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        id: setup-python
        with:
          python-version: ${{ matrix.python-version }}
          cache: poetry
          cache-dependency-path: |
            **/poetry.lock
      - run: echo '${{ steps.setup-python.outputs.cache-hit }}' 
      - name: setup-poetry
        uses: abatilo/actions-poetry@v2
        with:
          poetry-version: ${{ matrix.poetry-version }}
      - name: install-pacakges-with-poetry
        run: |
            poetry install
      - name: Cache Poetry cache
        uses: actions/cache@v3
        with:
          path: ~/.cache/pypoetry
          key: poetry-cache-${{ runner.os }}-${{ matrix.python-version }}-${{ matrix.poetry-version  }}
      - name: View poetry --help
        run: poetry --help